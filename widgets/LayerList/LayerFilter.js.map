{"version":3,"sources":["../../../widgets/LayerList/LayerFilter.js"],"names":["define","_WidgetBase","declare","lang","_TemplatedMixin","template","dom","on","keys","domClass","focusUtil","jimuUtils","Search","templateString","baseClass","layerFilterInput","isValid","layerListWidget","layerInfoIsValidStatus","layerInfoIsExpandStatus","postMixInProperties","inherited","arguments","nls","mixin","clone","window","jimuNls","common","constructor","startup","placeholder","typeAKeywork","onSearch","hitch","_onFilter","searchWhenInput","placeAt","searchInputNode","setSelectable","cancelButton","own","searchButton","inputSearch","clearInputButton","_updateLayerInfoStatus","filterText","operLayerInfos","traversalAll","layerInfo","currentLayerInfo","title","toLowerCase","indexOf","id","parentLayerInfo","isValidLayerInfo","isExpanded","cancelFilter","needToFocusOnNextDom","value","_refresh","remove","add","focus","hideFilter","text","_onSearchBtnClick","_onCancelBtnClick","_onClearInputButton","_onSearchButtonKey","e","keyCode","ENTER","_onLayerFilterInputKey","TAB","shiftKey","stopPropagation","preventDefault","_enableNavMode","contains","ESCAPE","_onClearInputButtonKey","_onCancelButtonKey","evt","isInNavMode","document","body"],"mappings":"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","file":"LayerFilter.js","sourcesContent":["///////////////////////////////////////////////////////////////////////////\r\n// Copyright Â© Esri. All Rights Reserved.\r\n//\r\n// Licensed under the Apache License Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//    http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n///////////////////////////////////////////////////////////////////////////\r\n\r\ndefine([\r\n  'dijit/_WidgetBase',\r\n  'dojo/_base/declare',\r\n  'dojo/_base/lang',\r\n  'dijit/_TemplatedMixin',\r\n  'dojo/text!./LayerFilter.html',\r\n  'dojo/dom',\r\n  'dojo/on',\r\n  'dojo/keys',\r\n  'dojo/dom-class',\r\n  'dijit/focus',\r\n  'jimu/utils',\r\n  'jimu/dijit/Search'\r\n], function(_WidgetBase, declare, lang, _TemplatedMixin, template, dom, on, keys,\r\ndomClass, focusUtil, jimuUtils, Search) {\r\n\r\n  return declare([_WidgetBase, _TemplatedMixin], {\r\n    templateString: template,\r\n    baseClass: 'layer-filter',\r\n    layerFilterInput: null,\r\n    isValid: false,\r\n    layerListWidget: null,\r\n    layerInfoIsValidStatus: null,\r\n    layerInfoIsExpandStatus: null,\r\n\r\n    postMixInProperties: function() {\r\n      this.inherited(arguments);\r\n      this.nls = lang.mixin(lang.clone(this.layerListWidget.nls), window.jimuNls.common);\r\n    },\r\n\r\n    constructor: function() {\r\n      this.layerInfoIsValidStatus = {};\r\n      this.layerInfoIsExpandStatus = {};\r\n    },\r\n\r\n    startup: function() {\r\n      this.layerFilterInput = new Search({\r\n        placeholder: this.nls.typeAKeywork,\r\n        onSearch: lang.hitch(this, this._onFilter),\r\n        searchWhenInput: true\r\n      }).placeAt(this.searchInputNode);\r\n      dom.setSelectable(this.cancelButton, false);\r\n\r\n      this.own(on(this.searchButton,\r\n        'keydown',\r\n        lang.hitch(this, '_onSearchButtonKey')));\r\n\r\n      this.own(on(this.layerFilterInput.inputSearch,\r\n        'keydown',\r\n        lang.hitch(this, '_onLayerFilterInputKey')));\r\n\r\n      this.own(on(this.clearInputButton,\r\n        'keydown',\r\n        lang.hitch(this, '_onClearInputButtonKey')));\r\n\r\n      this.own(on(this.cancelButton,\r\n        'keydown',\r\n        lang.hitch(this, '_onCancelButtonKey')));\r\n    },\r\n\r\n    _updateLayerInfoStatus: function(filterText) {\r\n      this.layerInfoIsValidStatus = {};\r\n      this.layerInfoIsExpandStatus = {};\r\n      this.layerListWidget.operLayerInfos.traversalAll(lang.hitch(this, function(layerInfo) {\r\n        if(filterText) {\r\n          var currentLayerInfo;\r\n          if(layerInfo.title.toLowerCase().indexOf(filterText.toLowerCase()) >= 0) {\r\n            currentLayerInfo = layerInfo;\r\n            while(currentLayerInfo) {\r\n              this.layerInfoIsValidStatus[currentLayerInfo.id] = true;\r\n              currentLayerInfo = currentLayerInfo.parentLayerInfo;\r\n              if(currentLayerInfo) {\r\n                this.layerInfoIsExpandStatus[currentLayerInfo.id] = true;\r\n              }\r\n            }\r\n          } else {\r\n            currentLayerInfo = layerInfo.parentLayerInfo;\r\n            while(currentLayerInfo) {\r\n              if(currentLayerInfo.title.toLowerCase().indexOf(filterText.toLowerCase()) >= 0) {\r\n                this.layerInfoIsValidStatus[layerInfo.id] = true;\r\n                break;\r\n              }\r\n              currentLayerInfo = currentLayerInfo.parentLayerInfo;\r\n            }\r\n          }\r\n        } else {\r\n          this.layerInfoIsValidStatus[layerInfo.id] = true;\r\n        }\r\n      }));\r\n    },\r\n\r\n    isValidLayerInfo: function(layerInfo) {\r\n      return !this.isValid || this.layerInfoIsValidStatus[layerInfo.id];\r\n    },\r\n\r\n    isExpanded: function(layerInfo) {\r\n      return this.isValid && this.layerInfoIsExpandStatus[layerInfo.id];\r\n    },\r\n\r\n    cancelFilter: function(needToFocusOnNextDom) {\r\n      this.isValid = false;\r\n      if(this.layerFilterInput.inputSearch.value) {\r\n        this.layerFilterInput.inputSearch.value = \"\";\r\n        this.layerListWidget._refresh();\r\n      }\r\n      domClass.remove(this.searchButton, 'invalid');\r\n      domClass.add(this.searchInputNode, 'invalid');\r\n      domClass.add(this.cancelButton, 'invalid');\r\n      if(needToFocusOnNextDom) {\r\n        focusUtil.focus(this.searchButton);\r\n      }\r\n    },\r\n\r\n    hideFilter: function() {\r\n      // keep isValid is ture\r\n      domClass.remove(this.searchButton, 'invalid');\r\n      domClass.add(this.searchInputNode, 'invalid');\r\n      domClass.add(this.cancelButton, 'invalid');\r\n      focusUtil.focus(this.searchButton);\r\n    },\r\n\r\n    _onFilter: function(text) {\r\n      if(text) {\r\n        domClass.remove(this.clearInputButton, 'disable');\r\n      } else {\r\n        domClass.add(this.clearInputButton, 'disable');\r\n      }\r\n      this._updateLayerInfoStatus(text);\r\n      this.layerListWidget._refresh();\r\n    },\r\n\r\n    _onSearchBtnClick: function() {\r\n      this.isValid = true;\r\n      domClass.add(this.searchButton, 'invalid');\r\n      domClass.remove(this.searchInputNode, 'invalid');\r\n      domClass.remove(this.cancelButton, 'invalid');\r\n      this.layerFilterInput.inputSearch.focus();\r\n    },\r\n\r\n    _onCancelBtnClick: function() {\r\n      this.cancelFilter(true);\r\n    },\r\n\r\n    _onClearInputButton: function() {\r\n      if(this.layerFilterInput.inputSearch.value) {\r\n        domClass.add(this.clearInputButton, 'disable');\r\n        this.layerFilterInput.inputSearch.focus();\r\n        this.layerFilterInput.inputSearch.value = \"\";\r\n        this._updateLayerInfoStatus(\"\");\r\n        this.layerListWidget._refresh();\r\n      }\r\n    },\r\n\r\n    _onSearchButtonKey: function(e) {\r\n      if(e.keyCode === keys.ENTER) {\r\n        this._onSearchBtnClick();\r\n      }\r\n    },\r\n\r\n    _onLayerFilterInputKey: function(e) {\r\n      if(e.keyCode === keys.TAB && e.shiftKey) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        this._enableNavMode(e);\r\n      } else if(e.keyCode === keys.TAB && !e.shiftKey) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        this._enableNavMode(e);\r\n        if(domClass.contains(this.clearInputButton, 'disable')) {\r\n          focusUtil.focus(this.cancelButton);\r\n        } else {\r\n          focusUtil.focus(this.clearInputButton);\r\n        }\r\n      } else if(e.keyCode === keys.ESCAPE) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        //this._onCancelBtnClick();\r\n        this.hideFilter();\r\n      }\r\n    },\r\n\r\n    _onClearInputButtonKey: function(e) {\r\n      if(e.keyCode === keys.TAB && e.shiftKey) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        this._enableNavMode(e);\r\n        focusUtil.focus(this.layerFilterInput.inputSearch);\r\n      } else if(e.keyCode === keys.TAB && !e.shiftKey) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        focusUtil.focus(this.cancelButton);\r\n      } else if(e.keyCode === keys.ENTER) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        this._onClearInputButton();\r\n      } else if(e.keyCode === keys.ESCAPE) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        //this._onCancelBtnClick();\r\n        this.hideFilter();\r\n      }\r\n    },\r\n\r\n    _onCancelButtonKey: function(e) {\r\n      if(e.keyCode === keys.TAB && e.shiftKey) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        this._enableNavMode(e);\r\n        focusUtil.focus(this.layerFilterInput.inputSearch);\r\n      } else if(e.keyCode === keys.TAB && !e.shiftKey) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        this._enableNavMode(e);\r\n      } else if(e.keyCode === keys.ENTER) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        this._onCancelBtnClick();\r\n      } else if(e.keyCode === keys.ESCAPE) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        //this._onCancelBtnClick();\r\n        this.hideFilter();\r\n      }\r\n    },\r\n\r\n    _enableNavMode:function(evt) {\r\n      if(evt.keyCode === keys.TAB && !jimuUtils.isInNavMode()){\r\n        domClass.add(document.body, 'jimu-nav-mode');\r\n      }\r\n    }\r\n  });\r\n});\r\n"]}