{"version":3,"sources":["../../../../widgets/AddData/search/SearchBox.js"],"names":["define","declare","lang","on","keys","SearchComponent","template","i18n","templateString","postCreate","inherited","arguments","_checkClearButton","own","searchTextBox","hitch","evt","keyCode","ENTER","search","clearButtonClicked","value","searchButtonClicked","appendQueryParams","params","q","trim","length","canSortByRelevance"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,OAAO,CAAC,oBAAD,EACH,iBADG,EAEH,SAFG,EAGH,WAHG,EAIH,mBAJG,EAKH,sCALG,EAMH,0BANG,CAAP,EAQE,UAASC,OAAT,EAAkBC,IAAlB,EAAwBC,EAAxB,EAA4BC,IAA5B,EAAkCC,eAAlC,EAAmDC,QAAnD,EAA6DC,IAA7D,EAAmE;;AAEjE,SAAON,QAAQ,CAACI,eAAD,CAAR,EAA2B;;AAEhCE,UAAMA,IAF0B;AAGhCC,oBAAgBF,QAHgB;;AAKhCG,gBAAY,sBAAW;AACrB,WAAKC,SAAL,CAAeC,SAAf;AACA,WAAKC,iBAAL;;AAEA,WAAKC,GAAL,CAASV,GAAG,KAAKW,aAAR,EAAuB,OAAvB,EAAgCZ,KAAKa,KAAL,CAAW,IAAX,EAAiB,UAASC,GAAT,EAAc;AACtE,aAAKJ,iBAAL;AACA,YAAII,IAAIC,OAAJ,KAAgBb,KAAKc,KAAzB,EAAgC;AAC9B,eAAKC,MAAL;AACD;AACF,OALwC,CAAhC,CAAT;AAMD,KAf+B;;AAiBhCP,uBAAmB,6BAAW;AAC5B;;;;;;;;;AASD,KA3B+B;;AA6BhCQ,wBAAoB,8BAAW;AAC7B,WAAKN,aAAL,CAAmBO,KAAnB,GAA2B,EAA3B;AACA,WAAKT,iBAAL;AACA,WAAKO,MAAL;AACD,KAjC+B;;AAmChCG,yBAAqB,+BAAW;AAC9B,WAAKH,MAAL;AACD,KArC+B;;AAuChC;;AAEAI,uBAAmB,2BAASC,MAAT,EAAiB;AAClC,UAAIC,IAAI,KAAKX,aAAL,CAAmBO,KAA3B;AACA,UAAII,MAAM,IAAV,EAAgB;AACdA,YAAIvB,KAAKwB,IAAL,CAAUD,CAAV,CAAJ;AACD;AACD,UAAIA,MAAM,IAAN,IAAcA,EAAEE,MAAF,GAAW,CAA7B,EAAgC;AAC9BH,eAAOI,kBAAP,GAA4B,IAA5B;AACAH,YAAI,MAAMA,CAAN,GAAU,GAAd;AACA,YAAID,OAAOC,CAAP,KAAa,IAAb,IAAqBD,OAAOC,CAAP,CAASE,MAAT,GAAkB,CAA3C,EAA8C;AAC5CH,iBAAOC,CAAP,IAAY,UAAUA,CAAtB;AACD,SAFD,MAEO;AACLD,iBAAOC,CAAP,GAAWA,CAAX;AACD;AACF;AACF;;AAvD+B,GAA3B,CAAP;AA2DD,CArEH","file":"SearchBox.js","sourcesContent":["///////////////////////////////////////////////////////////////////////////\r\n// Copyright Â© Esri. All Rights Reserved.\r\n//\r\n// Licensed under the Apache License Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//    http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n///////////////////////////////////////////////////////////////////////////\r\ndefine([\"dojo/_base/declare\",\r\n    \"dojo/_base/lang\",\r\n    \"dojo/on\",\r\n    \"dojo/keys\",\r\n    \"./SearchComponent\",\r\n    \"dojo/text!./templates/SearchBox.html\",\r\n    \"dojo/i18n!../nls/strings\"\r\n  ],\r\n  function(declare, lang, on, keys, SearchComponent, template, i18n) {\r\n\r\n    return declare([SearchComponent], {\r\n\r\n      i18n: i18n,\r\n      templateString: template,\r\n\r\n      postCreate: function() {\r\n        this.inherited(arguments);\r\n        this._checkClearButton();\r\n\r\n        this.own(on(this.searchTextBox, \"keyup\", lang.hitch(this, function(evt) {\r\n          this._checkClearButton();\r\n          if (evt.keyCode === keys.ENTER) {\r\n            this.search();\r\n          }\r\n        })));\r\n      },\r\n\r\n      _checkClearButton: function() {\r\n        /*\r\n        var v = this.searchTextBox.value;\r\n        if (v !== null && v.length > 0) {\r\n          //domClass.remove(this.clearButton,\"hidden\");\r\n          domClass.add(this.clearButton, \"hidden\");\r\n        } else {\r\n          domClass.add(this.clearButton, \"hidden\");\r\n        }\r\n        */\r\n      },\r\n\r\n      clearButtonClicked: function() {\r\n        this.searchTextBox.value = \"\";\r\n        this._checkClearButton();\r\n        this.search();\r\n      },\r\n\r\n      searchButtonClicked: function() {\r\n        this.search();\r\n      },\r\n\r\n      /* SearchComponent API ============================================= */\r\n\r\n      appendQueryParams: function(params) {\r\n        var q = this.searchTextBox.value;\r\n        if (q !== null) {\r\n          q = lang.trim(q);\r\n        }\r\n        if (q !== null && q.length > 0) {\r\n          params.canSortByRelevance = true;\r\n          q = \"(\" + q + \")\";\r\n          if (params.q !== null && params.q.length > 0) {\r\n            params.q += \" AND \" + q;\r\n          } else {\r\n            params.q = q;\r\n          }\r\n        }\r\n      }\r\n\r\n    });\r\n\r\n  });\r\n"]}