{"version":3,"sources":["../../../../widgets/AddData/search/BBoxOption.js"],"names":["define","declare","SearchComponent","template","i18n","templateString","postCreate","inherited","arguments","bboxToggle","set","bboxClicked","search","_getBBox","ext","map","getMap","geographicExtent","xmin","ymin","xmax","ymax","appendQueryParams","params","get","bbox","canSortByRelevance"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,OAAO,CAAC,oBAAD,EACH,mBADG,EAEH,uCAFG,EAGH,0BAHG,EAIH,qBAJG,CAAP,EAME,UAASC,OAAT,EAAkBC,eAAlB,EAAmCC,QAAnC,EAA6CC,IAA7C,EAAmD;;AAEjD,SAAOH,QAAQ,CAACC,eAAD,CAAR,EAA2B;;AAEhCE,UAAMA,IAF0B;AAGhCC,oBAAgBF,QAHgB;;AAKhCG,gBAAY,sBAAW;AACrB,WAAKC,SAAL,CAAeC,SAAf;AACA,WAAKC,UAAL,CAAgBC,GAAhB,CAAoB,SAApB,EAA+B,IAA/B;AACD,KAR+B;;AAUhCC,iBAAa,uBAAW;AACtB,WAAKC,MAAL;AACD,KAZ+B;;AAchCC,cAAU,oBAAW;AACnB,UAAIC,GAAJ;AAAA,UAASC,MAAM,KAAKC,MAAL,EAAf;AACA,UAAID,GAAJ,EAAS;AACPD,cAAMC,IAAIE,gBAAV;AACA,YAAIH,GAAJ,EAAS;AACP,iBAAOA,IAAII,IAAJ,GAAW,GAAX,GAAiBJ,IAAIK,IAArB,GAA4B,GAA5B,GAAkCL,IAAIM,IAAtC,GAA6C,GAA7C,GAAmDN,IAAIO,IAA9D;AACD;AACF;AACD,aAAO,IAAP;AACD,KAvB+B;;AAyBhC;;AAEAC,uBAAmB,2BAASC,MAAT,EAAiB;AAClC,UAAI,KAAKd,UAAL,CAAgBe,GAAhB,CAAoB,SAApB,CAAJ,EAAoC;AAClC,YAAIC,OAAO,KAAKZ,QAAL,EAAX;AACA,YAAIY,SAAS,IAAb,EAAmB;AACjB;AACAF,iBAAOG,kBAAP,GAA4B,IAA5B;AACAH,iBAAOE,IAAP,GAAcA,IAAd;AACD;AACF;AACF;;AApC+B,GAA3B,CAAP;AAwCD,CAhDH","file":"BBoxOption.js","sourcesContent":["///////////////////////////////////////////////////////////////////////////\r\n// Copyright Â© Esri. All Rights Reserved.\r\n//\r\n// Licensed under the Apache License Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//    http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n///////////////////////////////////////////////////////////////////////////\r\ndefine([\"dojo/_base/declare\",\r\n    \"./SearchComponent\",\r\n    \"dojo/text!./templates/BBoxOption.html\",\r\n    \"dojo/i18n!../nls/strings\",\r\n    \"dijit/form/CheckBox\"\r\n  ],\r\n  function(declare, SearchComponent, template, i18n) {\r\n\r\n    return declare([SearchComponent], {\r\n\r\n      i18n: i18n,\r\n      templateString: template,\r\n\r\n      postCreate: function() {\r\n        this.inherited(arguments);\r\n        this.bboxToggle.set(\"checked\", true);\r\n      },\r\n\r\n      bboxClicked: function() {\r\n        this.search();\r\n      },\r\n\r\n      _getBBox: function() {\r\n        var ext, map = this.getMap();\r\n        if (map) {\r\n          ext = map.geographicExtent;\r\n          if (ext) {\r\n            return ext.xmin + \",\" + ext.ymin + \",\" + ext.xmax + \",\" + ext.ymax;\r\n          }\r\n        }\r\n        return null;\r\n      },\r\n\r\n      /* SearchComponent API ============================================= */\r\n\r\n      appendQueryParams: function(params) {\r\n        if (this.bboxToggle.get(\"checked\")) {\r\n          var bbox = this._getBBox();\r\n          if (bbox !== null) {\r\n            // TODO is bbox just a filter, are results spatially ranked?\r\n            params.canSortByRelevance = true;\r\n            params.bbox = bbox;\r\n          }\r\n        }\r\n      }\r\n\r\n    });\r\n\r\n  });"]}