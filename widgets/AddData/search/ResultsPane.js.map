{"version":3,"sources":["../../../../widgets/AddData/search/ResultsPane.js"],"names":["define","declare","array","SearchComponent","template","i18n","ItemCard","util","templateString","postCreate","inherited","arguments","addItem","itemCard","placeAt","itemsNode","destroyItems","noMatchNode","style","display","innerHTML","destroyDescendants","showNoMatch","setNodeText","search","resultsPane","noMatch","processResults","searchResponse","results","length","idsAdded","findLayersAdded","getMap","itemIds","forEach","result","item","canRemove","indexOf","id"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,OAAO,CAAC,oBAAD,EACH,kBADG,EAEH,mBAFG,EAGH,wCAHG,EAIH,0BAJG,EAKH,YALG,EAMH,QANG,CAAP,EAQE,UAASC,OAAT,EAAkBC,KAAlB,EAAyBC,eAAzB,EAA0CC,QAA1C,EAAoDC,IAApD,EAA0DC,QAA1D,EAAoEC,IAApE,EAA0E;;AAExE,SAAON,QAAQ,CAACE,eAAD,CAAR,EAA2B;;AAEhCE,UAAMA,IAF0B;AAGhCG,oBAAgBJ,QAHgB;;AAKhCK,gBAAY,sBAAW;AACrB,WAAKC,SAAL,CAAeC,SAAf;AACD,KAP+B;;AAShCC,aAAS,iBAASC,QAAT,EAAmB;AAC1BA,eAASC,OAAT,CAAiB,KAAKC,SAAtB;AACD,KAX+B;;AAahCC,kBAAc,wBAAW;AACvB,WAAKC,WAAL,CAAiBC,KAAjB,CAAuBC,OAAvB,GAAiC,MAAjC;AACA,WAAKF,WAAL,CAAiBG,SAAjB,GAA6B,EAA7B;AACA,WAAKC,kBAAL,CAAwB,KAAxB;AACD,KAjB+B;;AAmBhCC,iBAAa,uBAAW;AACtBf,WAAKgB,WAAL,CAAiB,KAAKN,WAAtB,EAAmCZ,KAAKmB,MAAL,CAAYC,WAAZ,CAAwBC,OAA3D;AACA,WAAKT,WAAL,CAAiBC,KAAjB,CAAuBC,OAAvB,GAAiC,OAAjC;AACD,KAtB+B;;AAwBhC;;AAEAQ,oBAAgB,wBAASC,cAAT,EAAyB;AACvC,WAAKZ,YAAL;AACA,UAAIa,UAAUD,eAAeC,OAA7B;AACA,UAAIA,WAAWA,QAAQC,MAAR,GAAiB,CAAhC,EAAmC;AACjC,YAAIC,WAAWxB,KAAKyB,eAAL,CAAqB,KAAKC,MAAL,EAArB,EAAoC,IAApC,EAA0CC,OAAzD;AACAhC,cAAMiC,OAAN,CAAcP,eAAeC,OAA7B,EAAsC,UAASO,MAAT,EAAiB;AACrD;AACA,eAAKxB,OAAL,CAAa,IAAIN,QAAJ,CAAa;AACxB+B,kBAAMD,MADkB;AAExBE,uBAAYP,SAASQ,OAAT,CAAiBH,OAAOI,EAAxB,MAAgC,CAAC,CAFrB;AAGxBf,yBAAa;AAHW,WAAb,CAAb;AAKD,SAPD,EAOG,IAPH;AAQD,OAVD,MAUO;AACL,aAAKH,WAAL;AACD;AACF;;AA1C+B,GAA3B,CAAP;AA8CD,CAxDH","file":"ResultsPane.js","sourcesContent":["///////////////////////////////////////////////////////////////////////////\r\n// Copyright Â© Esri. All Rights Reserved.\r\n//\r\n// Licensed under the Apache License Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//    http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n///////////////////////////////////////////////////////////////////////////\r\ndefine([\"dojo/_base/declare\",\r\n    \"dojo/_base/array\",\r\n    \"./SearchComponent\",\r\n    \"dojo/text!./templates/ResultsPane.html\",\r\n    \"dojo/i18n!../nls/strings\",\r\n    \"./ItemCard\",\r\n    \"./util\"\r\n  ],\r\n  function(declare, array, SearchComponent, template, i18n, ItemCard, util) {\r\n\r\n    return declare([SearchComponent], {\r\n\r\n      i18n: i18n,\r\n      templateString: template,\r\n\r\n      postCreate: function() {\r\n        this.inherited(arguments);\r\n      },\r\n\r\n      addItem: function(itemCard) {\r\n        itemCard.placeAt(this.itemsNode);\r\n      },\r\n\r\n      destroyItems: function() {\r\n        this.noMatchNode.style.display = \"none\";\r\n        this.noMatchNode.innerHTML = \"\";\r\n        this.destroyDescendants(false);\r\n      },\r\n\r\n      showNoMatch: function() {\r\n        util.setNodeText(this.noMatchNode, i18n.search.resultsPane.noMatch);\r\n        this.noMatchNode.style.display = \"block\";\r\n      },\r\n\r\n      /* SearchComponent API ============================================= */\r\n\r\n      processResults: function(searchResponse) {\r\n        this.destroyItems();\r\n        var results = searchResponse.results;\r\n        if (results && results.length > 0) {\r\n          var idsAdded = util.findLayersAdded(this.getMap(), null).itemIds;\r\n          array.forEach(searchResponse.results, function(result) {\r\n            //console.warn(result.id,idsAdded);\r\n            this.addItem(new ItemCard({\r\n              item: result,\r\n              canRemove: (idsAdded.indexOf(result.id) !== -1),\r\n              resultsPane: this\r\n            }));\r\n          }, this);\r\n        } else {\r\n          this.showNoMatch();\r\n        }\r\n      }\r\n\r\n    });\r\n\r\n  });"]}