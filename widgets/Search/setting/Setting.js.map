{"version":3,"sources":["../../../../widgets/Search/setting/Setting.js"],"names":["define","declare","array","html","lang","query","on","when","esriLang","_WidgetsInTemplateMixin","BaseWidgetSetting","LayerInfos","utils","jimuUtils","QuerySourceSetting","LocatorSourceSetting","CheckBox","SimpleTable","baseClass","_currentSourceSetting","_defaultZoomScale","postCreate","inherited","arguments","sourceList","autoHeight","selectable","fields","name","title","nls","width","type","editable","actions","setStyle","domNode","startup","own","hitch","_onSourceItemSelected","_onSourceItemRemoved","_checkConfig","showInfoWindowOnSelect","checked","label","showInfoWindowOnSelect2","config","sources","shelter","show","getInstance","map","itemInfo","then","layerInfosObj","setMap","setLayerInfosObj","setAppConfig","appConfig","getConfigInfo","setConfig","hide","allPlaceholder","set","stripHTML","setValue","isDefined","forEach","source","index","addResult","addRow","success","_setRelatedConfig","tr","firstTr","setTimeout","selectRow","console","error","getConfig","_closeSourceSetting","get","trs","getRows","_getRelatedConfig","_definition","_removeRelatedConfig","push","destroy","_onAllPlaceholderBlur","_onMenuItemClick","evt","isValidConfig","showValidationTip","itemType","target","getAttr","_addNewLocator","_addNewQuerySource","_createNewLocatorSourceSettingFromMenuItem","_createNewQuerySourceSettingFromMenuItem","data","clone","removeData","setting","definition","locatorSetting","setDefinition","url","singleLineFieldName","placeholder","countryCode","panToScale","zoomScale","maxSuggestions","undefined","maxResults","searchInCurrentMapExtent","_openLocatorChooser","item","length","setRelatedTr","placeAt","sourceSettingNode","getRelatedTr","editRow","_createNewLocatorSourceSettingFromSourceList","relatedTr","enableLocalSearch","localSearchMinScale","localSearchDistance","radiusUnit","_processlocalSearchTable","getDefinition","querySetting","layerId","searchFields","displayField","exactMatch","_openQuerySourceChooser","_createNewQuerySourceSettingFromSourceList","currentTr","settingPagePopup","enableButton","disableButton"],"mappings":"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","file":"Setting.js","sourcesContent":["///////////////////////////////////////////////////////////////////////////\r\n// Copyright © Esri. All Rights Reserved.\r\n//\r\n// Licensed under the Apache License Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//    http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n///////////////////////////////////////////////////////////////////////////\r\n\r\ndefine([\r\n    \"dojo/_base/declare\",\r\n    \"dojo/_base/array\",\r\n    \"dojo/_base/html\",\r\n    \"dojo/_base/lang\",\r\n    \"dojo/query\",\r\n    \"dojo/on\",\r\n    \"dojo/when\",\r\n    \"esri/lang\",\r\n    \"dijit/_WidgetsInTemplateMixin\",\r\n    \"jimu/BaseWidgetSetting\",\r\n    \"jimu/LayerInfos/LayerInfos\",\r\n    \"../utils\",\r\n    \"jimu/utils\",\r\n    \"./QuerySourceSetting\",\r\n    \"./LocatorSourceSetting\",\r\n    \"jimu/dijit/CheckBox\",\r\n    \"jimu/dijit/SimpleTable\",\r\n    \"jimu/dijit/LoadingIndicator\"\r\n  ],\r\n  function(\r\n    declare, array, html, lang, query, on, when, esriLang,\r\n    _WidgetsInTemplateMixin, BaseWidgetSetting, LayerInfos, utils, jimuUtils,\r\n    QuerySourceSetting, LocatorSourceSetting, CheckBox, SimpleTable) {\r\n    /*jshint maxlen: 150*/\r\n    /*jshint smarttabs:true */\r\n\r\n    return declare([BaseWidgetSetting, _WidgetsInTemplateMixin], {\r\n      baseClass: 'jimu-widget-search-setting',\r\n      _currentSourceSetting: null,\r\n      _defaultZoomScale: null,\r\n\r\n      postCreate: function() {\r\n        this.inherited(arguments);\r\n\r\n        this.sourceList = new SimpleTable({\r\n          autoHeight: false,\r\n          selectable: true,\r\n          fields: [{\r\n            name: \"name\",\r\n            title: this.nls.name,\r\n            width: \"auto\",\r\n            type: \"text\",\r\n            editable: false\r\n          }, {\r\n            name: \"actions\",\r\n            title: \"\",\r\n            width: \"70px\",\r\n            type: \"actions\",\r\n            actions: [\"up\", \"down\", \"delete\"]\r\n          }]\r\n        }, this.sourceList);\r\n        html.setStyle(this.sourceList.domNode, 'height', '100%');\r\n        this.sourceList.startup();\r\n        this.own(on(this.sourceList, 'row-select', lang.hitch(this, this._onSourceItemSelected)));\r\n        this.own(on(this.sourceList, 'row-delete', lang.hitch(this, this._onSourceItemRemoved)));\r\n        this.own(on(this.sourceList, 'row-add', lang.hitch(this, this._checkConfig)));\r\n\r\n        this.showInfoWindowOnSelect = new CheckBox({\r\n          checked: true,\r\n          label: this.nls.showInfoWindowOnSelect2\r\n        }, this.showInfoWindowOnSelect);\r\n      },\r\n\r\n      startup: function() {\r\n        this.inherited(arguments);\r\n\r\n        if (!(this.config && this.config.sources)) {\r\n          this.config.sources = [];\r\n        }\r\n\r\n        this.shelter.show();\r\n\r\n        LayerInfos.getInstance(this.map, this.map.itemInfo)\r\n          .then(lang.hitch(this, function(layerInfosObj) {\r\n            this.layerInfosObj = layerInfosObj;\r\n            utils.setMap(this.map);\r\n            utils.setLayerInfosObj(this.layerInfosObj);\r\n            utils.setAppConfig(this.appConfig);\r\n            when(utils.getConfigInfo(this.config)).then(lang.hitch(this, function(config) {\r\n              if (!this.domNode) {\r\n                return;\r\n              }\r\n              this.setConfig(config);\r\n              this.shelter.hide();\r\n            }));\r\n          }));\r\n      },\r\n\r\n      setConfig: function(config) {\r\n        this.config = config;\r\n        var sources = config.sources;\r\n        this.allPlaceholder.set('value', jimuUtils.stripHTML(this.config.allPlaceholder));\r\n        this.showInfoWindowOnSelect.setValue(\r\n          esriLang.isDefined(this.config.showInfoWindowOnSelect) ?\r\n          !!this.config.showInfoWindowOnSelect : true);\r\n        array.forEach(sources, lang.hitch(this, function(source, index) {\r\n          var addResult = this.sourceList.addRow({\r\n            name: source.name || \"\"\r\n          });\r\n\r\n          if (addResult && addResult.success) {\r\n            this._setRelatedConfig(addResult.tr, source);\r\n\r\n            if (index === 0) {\r\n              var firstTr = addResult.tr;\r\n              setTimeout(lang.hitch(this, function() {\r\n                this.sourceList.selectRow(addResult.tr);\r\n                firstTr = null;\r\n              }), 100);\r\n            }\r\n          } else {\r\n            console.error(\"add row failed \", addResult);\r\n          }\r\n        }));\r\n      },\r\n\r\n      getConfig: function() {\r\n        if (this._currentSourceSetting) {\r\n          this._closeSourceSetting();\r\n        }\r\n        var config = {\r\n          allPlaceholder: jimuUtils.stripHTML(this.allPlaceholder.get('value')),\r\n          showInfoWindowOnSelect: this.showInfoWindowOnSelect.checked\r\n        };\r\n        var trs = this.sourceList.getRows();\r\n        var sources = [];\r\n        array.forEach(trs, lang.hitch(this, function(tr) {\r\n          var source = this._getRelatedConfig(tr);\r\n          delete source._definition;\r\n          this._removeRelatedConfig(tr);\r\n\r\n          sources.push(source);\r\n        }));\r\n\r\n        config.sources = sources;\r\n        return config;\r\n      },\r\n\r\n      destroy: function() {\r\n        utils.setMap(null);\r\n        utils.setLayerInfosObj(null);\r\n        utils.setAppConfig(null);\r\n\r\n        this.inherited(arguments);\r\n      },\r\n\r\n      _onAllPlaceholderBlur: function() {\r\n        this.allPlaceholder.set('value', jimuUtils.stripHTML(this.allPlaceholder.get('value')));\r\n      },\r\n\r\n      _onMenuItemClick: function(evt) {\r\n        // check fields\r\n        if (this._currentSourceSetting && !this._currentSourceSetting.isValidConfig()) {\r\n          this._currentSourceSetting.showValidationTip();\r\n          return;\r\n        }\r\n\r\n        var itemType = evt && evt.target && html.getAttr(evt.target, \"type\");\r\n        if (itemType === \"locator\") {\r\n          this._addNewLocator();\r\n        } else if (itemType === \"query\") {\r\n          this._addNewQuerySource();\r\n        }\r\n      },\r\n\r\n      _addNewLocator: function() {\r\n        this._createNewLocatorSourceSettingFromMenuItem({}, {});\r\n      },\r\n\r\n      _addNewQuerySource: function() {\r\n        this._createNewQuerySourceSettingFromMenuItem({}, {});\r\n      },\r\n\r\n      _setRelatedConfig: function(tr, source) {\r\n        query(tr).data('config', lang.clone(source));\r\n      },\r\n\r\n      _getRelatedConfig: function(tr) {\r\n        return query(tr).data('config')[0];\r\n      },\r\n\r\n      _removeRelatedConfig: function(tr) {\r\n        return query(tr).removeData('config');\r\n      },\r\n\r\n      _createNewLocatorSourceSettingFromMenuItem: function(setting, definition) {\r\n        var locatorSetting = new LocatorSourceSetting({\r\n          nls: this.nls,\r\n          map: this.map\r\n        });\r\n        locatorSetting.setDefinition(definition);\r\n        locatorSetting.setConfig({\r\n          url: setting.url || \"\",\r\n          name: setting.name || \"\",\r\n          singleLineFieldName: setting.singleLineFieldName || \"\",\r\n          placeholder: setting.placeholder || \"\",\r\n          countryCode: setting.countryCode || \"\",\r\n          panToScale: setting.panToScale || false,\r\n          zoomScale: setting.zoomScale || this._defaultZoomScale,\r\n          maxSuggestions: (setting.maxSuggestions === null || setting.maxSuggestions === undefined) ?\r\n                          6 :\r\n                          setting.maxSuggestions,\r\n          maxResults: setting.maxResults || 6,\r\n          searchInCurrentMapExtent: !!setting.searchInCurrentMapExtent,\r\n          type: \"locator\"\r\n        });\r\n        locatorSetting._openLocatorChooser();\r\n\r\n        locatorSetting.own(\r\n          on(locatorSetting, 'select-locator-url-ok', lang.hitch(this, function(item) {\r\n            var addResult = this.sourceList.addRow({\r\n              name: item.name || \"New Geocoder\"\r\n            }, this.sourceList.getRows().length);\r\n            if (addResult && addResult.success) {\r\n              if (this._currentSourceSetting) {\r\n                this._closeSourceSetting();\r\n              }\r\n              locatorSetting.setRelatedTr(addResult.tr);\r\n              locatorSetting.placeAt(this.sourceSettingNode);\r\n              this.sourceList.selectRow(addResult.tr);\r\n\r\n              this._currentSourceSetting = locatorSetting;\r\n            }\r\n          }))\r\n        );\r\n        locatorSetting.own(\r\n          on(locatorSetting, 'reselect-locator-url-ok', lang.hitch(this, function(item) {\r\n            var tr = this._currentSourceSetting.getRelatedTr();\r\n            this.sourceList.editRow(tr, {\r\n              name: item.name\r\n            });\r\n          }))\r\n        );\r\n        locatorSetting.own(\r\n          on(locatorSetting, 'select-locator-url-cancel', lang.hitch(this, function() {\r\n            if (this._currentSourceSetting !== locatorSetting) {// locator doesn't display in UI\r\n              locatorSetting.destroy();\r\n              locatorSetting = null;\r\n            }\r\n          }))\r\n        );\r\n      },\r\n\r\n      _createNewLocatorSourceSettingFromSourceList: function(setting, definition, relatedTr) {\r\n        if (this._currentSourceSetting) {\r\n          this._closeSourceSetting();\r\n        }\r\n\r\n        this._currentSourceSetting = new LocatorSourceSetting({\r\n          nls: this.nls,\r\n          map: this.map\r\n        });\r\n        this._currentSourceSetting.setDefinition(definition);\r\n        this._currentSourceSetting.setConfig({\r\n          url: setting.url || \"\",\r\n          name: setting.name || \"\",\r\n          singleLineFieldName: setting.singleLineFieldName || \"\",\r\n          placeholder: setting.placeholder || \"\",\r\n          countryCode: setting.countryCode || \"\",\r\n          panToScale: setting.panToScale || false,\r\n          zoomScale: setting.zoomScale || this._defaultZoomScale,\r\n          maxSuggestions: (setting.maxSuggestions === null || setting.maxSuggestions === undefined) ?\r\n                          6 :\r\n                          setting.maxSuggestions,\r\n          maxResults: setting.maxResults || 6,\r\n          searchInCurrentMapExtent: !!setting.searchInCurrentMapExtent,\r\n          enableLocalSearch: !!setting.enableLocalSearch,\r\n          localSearchMinScale: setting.localSearchMinScale,\r\n          localSearchDistance: setting.localSearchDistance,\r\n          radiusUnit: setting.radiusUnit,\r\n          type: \"locator\"\r\n        });\r\n        this._currentSourceSetting.setRelatedTr(relatedTr);\r\n        this._currentSourceSetting.placeAt(this.sourceSettingNode);\r\n        this._currentSourceSetting._processlocalSearchTable(!!setting.enableLocalSearch);\r\n\r\n        this._currentSourceSetting.own(\r\n          on(this._currentSourceSetting,\r\n            'reselect-locator-url-ok',\r\n            lang.hitch(this, function(item) {\r\n              var tr = this._currentSourceSetting.getRelatedTr();\r\n              this.sourceList.editRow(tr, {\r\n                name: item.name\r\n              });\r\n            }))\r\n        );\r\n      },\r\n\r\n      _closeSourceSetting: function() {\r\n        var tr = this._currentSourceSetting.getRelatedTr();\r\n        var source = this._currentSourceSetting.getConfig();\r\n        source._definition = this._currentSourceSetting.getDefinition();\r\n        this._setRelatedConfig(tr, source);\r\n        this.sourceList.editRow(tr, {\r\n          name: source.name\r\n        });\r\n        this._currentSourceSetting.destroy();\r\n      },\r\n\r\n      _createNewQuerySourceSettingFromMenuItem: function(setting, definition) {\r\n        var querySetting = new QuerySourceSetting({\r\n          nls: this.nls,\r\n          map: this.map,\r\n          appConfig: this.appConfig\r\n        });\r\n        querySetting.setDefinition(definition);\r\n        querySetting.setConfig({\r\n          url: setting.url,\r\n          name: setting.name || \"\",\r\n          layerId: setting.layerId,\r\n          placeholder: setting.placeholder || \"\",\r\n          searchFields: setting.searchFields || [],\r\n          displayField: setting.displayField || definition.displayField || \"\",\r\n          exactMatch: !!setting.exactMatch,\r\n          panToScale: setting.panToScale || false,\r\n          zoomScale: setting.zoomScale || this._defaultZoomScale,\r\n          maxSuggestions: (setting.maxSuggestions === null || setting.maxSuggestions === undefined) ?\r\n                          6 :\r\n                          setting.maxSuggestions,\r\n          maxResults: setting.maxResults || 6,\r\n          searchInCurrentMapExtent: !!setting.searchInCurrentMapExtent,\r\n          type: \"query\"\r\n        });\r\n        querySetting._openQuerySourceChooser();\r\n\r\n        querySetting.own(\r\n          on(querySetting, 'select-query-source-ok', lang.hitch(this, function(item) {\r\n            var addResult = this.sourceList.addRow({\r\n              name: item.name\r\n            }, 0);\r\n            if (addResult && addResult.success) {\r\n              if (this._currentSourceSetting) {\r\n                this._closeSourceSetting();\r\n              }\r\n              querySetting.setRelatedTr(addResult.tr);\r\n              querySetting.placeAt(this.sourceSettingNode);\r\n              this.sourceList.selectRow(addResult.tr);\r\n\r\n              this._currentSourceSetting = querySetting;\r\n            }\r\n          }))\r\n        );\r\n        querySetting.own(\r\n          on(querySetting, 'reselect-query-source-ok', lang.hitch(this, function(item) {\r\n            var tr = this._currentSourceSetting.getRelatedTr();\r\n            this.sourceList.editRow(tr, {\r\n              name: item.name\r\n            });\r\n          }))\r\n        );\r\n        querySetting.own(\r\n          on(querySetting, 'select-query-source-cancel', lang.hitch(this, function() {\r\n            if (this._currentSourceSetting !== querySetting) {// query source doesn't display in UI\r\n              querySetting.destroy();\r\n              querySetting = null;\r\n            }\r\n          }))\r\n        );\r\n      },\r\n\r\n      _createNewQuerySourceSettingFromSourceList: function(setting, definition, relatedTr) {\r\n        if (this._currentSourceSetting) {\r\n          this._closeSourceSetting();\r\n        }\r\n\r\n        this._currentSourceSetting = new QuerySourceSetting({\r\n          nls: this.nls,\r\n          map: this.map,\r\n          appConfig: this.appConfig\r\n        });\r\n        this._currentSourceSetting.placeAt(this.sourceSettingNode);\r\n        this._currentSourceSetting.setDefinition(definition);\r\n        this._currentSourceSetting.setConfig({\r\n          url: setting.url,\r\n          name: setting.name || \"\",\r\n          layerId: setting.layerId,\r\n          placeholder: setting.placeholder || \"\",\r\n          searchFields: setting.searchFields || [],\r\n          displayField: setting.displayField || definition.displayField || \"\",\r\n          exactMatch: !!setting.exactMatch,\r\n          panToScale: setting.panToScale || false,\r\n          zoomScale: setting.zoomScale || this._defaultZoomScale,\r\n          maxSuggestions: (setting.maxSuggestions === null || setting.maxSuggestions === undefined) ?\r\n                          6 :\r\n                          setting.maxSuggestions,\r\n          maxResults: setting.maxResults || 6,\r\n          searchInCurrentMapExtent: !!setting.searchInCurrentMapExtent,\r\n          type: \"query\"\r\n        });\r\n        this._currentSourceSetting.setRelatedTr(relatedTr);\r\n\r\n        this._currentSourceSetting.own(\r\n          on(this._currentSourceSetting, 'reselect-query-source', lang.hitch(this, function(item) {\r\n            var tr = this._currentSourceSetting.getRelatedTr();\r\n            this.sourceList.editRow(tr, {\r\n              name: item.name\r\n            });\r\n          }))\r\n        );\r\n      },\r\n\r\n      _onSourceItemRemoved: function(tr) {\r\n        this._checkConfig();\r\n        if (!this._currentSourceSetting) {\r\n          return;\r\n        }\r\n\r\n        var currentTr = this._currentSourceSetting.getRelatedTr();\r\n        if (currentTr === tr) {\r\n          this._currentSourceSetting.destroy();\r\n          this._currentSourceSetting = null;\r\n        }\r\n      },\r\n\r\n      _onSourceItemSelected: function(tr) {\r\n        var config = this._getRelatedConfig(tr);\r\n        var currentTr = this._currentSourceSetting && this._currentSourceSetting.tr;\r\n        if (!config || tr === currentTr) {\r\n          return;\r\n        }\r\n\r\n        // check fields\r\n        if (this._currentSourceSetting && !this._currentSourceSetting.isValidConfig()) {\r\n          this._currentSourceSetting.showValidationTip();\r\n          this.sourceList.selectRow(currentTr);\r\n          return;\r\n        }\r\n\r\n        if (config.type === \"query\") {\r\n          this._createNewQuerySourceSettingFromSourceList(config, config._definition || {}, tr);\r\n        } else if (config.type === \"locator\") {\r\n          this._createNewLocatorSourceSettingFromSourceList(config, config._definition || {}, tr);\r\n        }\r\n      },\r\n\r\n      _checkConfig: function() {\r\n        if(this.sourceList.getRows().length > 0) {\r\n          this.settingPagePopup.enableButton(0);\r\n        } else {\r\n          this.settingPagePopup.disableButton(0);\r\n        }\r\n      }\r\n\r\n    });\r\n  });\r\n"]}