{"version":3,"sources":["../../../../widgets/Coordinate/setting/Edit.js"],"names":["define","declare","lang","html","array","_WidgetsInTemplateMixin","BaseWidgetSetting","CheckBox","template","jimuUtils","utils","options","baseClass","templateString","currentWkid","version","enhanceVersion","_config","postCreate","inherited","arguments","transformForward","label","nls","forward","checked","setStyle","olderVersionDiv","enhanceVersionDiv","transformDiv","domNode","wkid","set","warning","transformationWkid","tfWarning","setConfig","config","clone","loadResource","then","hitch","parseInt","_adjustUnitOption","wkidLabel","innerHTML","sanitizeHTML","outputUnit","transformationLabel","setValue","err","console","error","getConfig","cs","standardizeWkid","get","getValue","getCSUnit","_options","sameSRWithMap","isSameSR","map","spatialReference","isGeographicCS","isGeographicUnit","isProjectedCS","isProjectUnit","spheroidCS","getGeoCSByProj","defaultUnit","unitRate","getUnitRate","_removeGeoUnits","forEach","getGeographicUnits","unit","removeOption","_removeProjUnits","getProjectUnits","_removeAllUnits","i","len","length","value","_addAllUnits","_option","addOption","isSpecialCS","isWebMercator","_isDefaultSR","defaultWkid","onWkidChange","newValue","newWkid","popup","disableButton","isValidWkid","getSRLabel","isSameSpheroid","enableButton","cName","closeDropDown","ontfWkidChange","tfid","newtfWkid","isValidTfWkid","getTransformationLabel","tName"],"mappings":"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","file":"Edit.js","sourcesContent":["///////////////////////////////////////////////////////////////////////////\r\n// Copyright © Esri. All Rights Reserved.\r\n//\r\n// Licensed under the Apache License Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//    http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n///////////////////////////////////////////////////////////////////////////\r\ndefine(\r\n  ['dojo/_base/declare',\r\n    'dojo/_base/lang',\r\n    'dojo/_base/html',\r\n    'dojo/_base/array',\r\n    'dijit/_WidgetsInTemplateMixin',\r\n    'jimu/BaseWidgetSetting',\r\n    'jimu/dijit/CheckBox',\r\n    'dojo/text!./Edit.html',\r\n    'jimu/utils',\r\n    \"jimu/SpatialReference/srUtils\",\r\n    'dijit/form/ValidationTextBox',\r\n    'dijit/form/Select'\r\n  ],\r\n  function(\r\n    declare,\r\n    lang,\r\n    html,\r\n    array,\r\n    _WidgetsInTemplateMixin,\r\n    BaseWidgetSetting,\r\n    CheckBox,\r\n    template,\r\n    jimuUtils,\r\n    utils\r\n  ) {\r\n    var options = [{\r\n      \"value\": \"\",\r\n      \"label\": \"Default\",\r\n      \"selected\": true,\r\n      \"disabled\": false\r\n    }, {\r\n      \"value\": \"\",\r\n      \"label\": \"\",\r\n      \"selected\": true,\r\n      \"disabled\": false\r\n    }, {\r\n      \"value\": \"INCHES\",\r\n      \"label\": \"Inches\",\r\n      \"selected\": false,\r\n      \"disabled\": false\r\n    }, {\r\n      \"value\": \"FOOT\",\r\n      \"label\": \"Foot\",\r\n      \"selected\": false,\r\n      \"disabled\": false\r\n    }, {\r\n      \"value\": \"FOOT_US\",\r\n      \"label\": \"Foot_US\",\r\n      \"selected\": false,\r\n      \"disabled\": false\r\n    }, {\r\n      \"value\": \"YARDS\",\r\n      \"label\": \"Yards\",\r\n      \"selected\": false,\r\n      \"disabled\": false\r\n    }, {\r\n      \"value\": \"MILES\",\r\n      \"label\": \"Miles\",\r\n      \"selected\": false,\r\n      \"disabled\": false\r\n    }, {\r\n      \"value\": \"NAUTICAL_MILES\",\r\n      \"label\": \"Nautical_Miles\",\r\n      \"selected\": false,\r\n      \"disabled\": false\r\n    }, {\r\n      \"value\": \"MILLIMETERS\",\r\n      \"label\": \"Millimeters\",\r\n      \"selected\": false,\r\n      \"disabled\": false\r\n    }, {\r\n      \"value\": \"CENTIMETERS\",\r\n      \"label\": \"Centimeters\",\r\n      \"selected\": false,\r\n      \"disabled\": false\r\n    }, {\r\n      \"value\": \"METER\",\r\n      \"label\": \"Meter\",\r\n      \"selected\": false,\r\n      \"disabled\": false\r\n    }, {\r\n      \"value\": \"KILOMETERS\",\r\n      \"label\": \"Kilometers\",\r\n      \"selected\": false,\r\n      \"disabled\": false\r\n    }, {\r\n      \"value\": \"DECIMETERS\",\r\n      \"label\": \"Decimeters\",\r\n      \"selected\": false,\r\n      \"disabled\": false\r\n    }, {\r\n      \"value\": \"\",\r\n      \"label\": \"\",\r\n      \"selected\": true,\r\n      \"disabled\": false\r\n    }, {\r\n      \"value\": \"DECIMAL_DEGREES\",\r\n      \"label\": \"Decimal_Degrees\",\r\n      \"selected\": false,\r\n      \"disabled\": false\r\n    }, {\r\n      \"value\": \"DEGREES_DECIMAL_MINUTES\",\r\n      \"label\": \"Degrees_Decimal_Minutes\",\r\n      \"selected\": false,\r\n      \"disabled\": false\r\n    }, {\r\n      \"value\": \"DEGREE_MINUTE_SECONDS\",\r\n      \"label\": \"Degree_Minutes_Seconds\",\r\n      \"selected\": false,\r\n      \"disabled\": false\r\n    }, {\r\n      \"value\": \"\",\r\n      \"label\": \"\",\r\n      \"selected\": true,\r\n      \"disabled\": false\r\n    }, {\r\n      \"value\": \"MGRS\",\r\n      \"label\": \"MGRS\",\r\n      \"selected\": false,\r\n      \"disabled\": false\r\n    }, {\r\n      \"value\": \"USNG\",\r\n      \"label\": \"USNG\",\r\n      \"selected\": false,\r\n      \"disabled\": false\r\n    }];\r\n\r\n    return declare([BaseWidgetSetting, _WidgetsInTemplateMixin], {\r\n      baseClass: \"jimu-coordinate-edit\",\r\n      templateString: template,\r\n      currentWkid: null,\r\n      version: null,\r\n      enhanceVersion: 10.1, // support transform wkid\r\n      _config: null,\r\n\r\n      postCreate: function() {\r\n        this.inherited(arguments);\r\n\r\n        this.transformForward = new CheckBox({\r\n          label: this.nls.forward,\r\n          checked: false\r\n        }, this.transformForward);\r\n\r\n        if (this.version < this.enhanceVersion) {\r\n          html.setStyle(this.olderVersionDiv, \"display\", \"block\");\r\n          html.setStyle(this.enhanceVersionDiv, \"display\", \"none\");\r\n        } else {\r\n          html.setStyle(this.olderVersionDiv, \"display\", \"none\");\r\n          html.setStyle(this.enhanceVersionDiv, \"display\", \"block\");\r\n        }\r\n\r\n        html.setStyle(this.transformDiv, \"display\", \"none\");\r\n        html.setStyle(this.transformForward.domNode, \"display\", \"none\");\r\n\r\n        this.wkid.set('missingMessage', this.nls.warning);\r\n        this.transformationWkid.set('missingMessage', this.nls.tfWarning);\r\n      },\r\n\r\n      setConfig: function(config) {\r\n        this._config = lang.clone(config);\r\n\r\n        utils.loadResource().then(lang.hitch(this, function() {\r\n          if (config.wkid) {\r\n            this.wkid.set('value', parseInt(config.wkid, 10));\r\n            this.currentWkid = parseInt(config.wkid, 10);\r\n\r\n            this._adjustUnitOption();\r\n          }\r\n          if (config.label) {\r\n            this.wkidLabel.innerHTML = jimuUtils.sanitizeHTML(config.label);\r\n          }\r\n          if (config.outputUnit) {\r\n            this.outputUnit.set('value', config.outputUnit);\r\n          }\r\n          if (config.transformationWkid) {\r\n            this.transformationWkid.set('value', parseInt(config.transformationWkid, 10));\r\n          }\r\n          if (config.transformationLabel) {\r\n            this.transformationLabel.innerHTML = jimuUtils.sanitizeHTML(config.transformationLabel);\r\n          }\r\n          if (config.transformForward) {\r\n            this.transformForward.setValue(config.transformForward);\r\n          }\r\n        }), lang.hitch(this, function(err) {\r\n          console.error(err);\r\n        }));\r\n      },\r\n\r\n      getConfig: function() {\r\n        var cs = {\r\n          wkid: utils.standardizeWkid(this.wkid.get('value')),\r\n          label: this.wkidLabel.innerHTML,\r\n          outputUnit: this.outputUnit.get('value'),\r\n          transformationWkid: parseInt(this.transformationWkid.get('value'), 10),\r\n          transformationLabel: this.transformationLabel.innerHTML,\r\n          transformForward: this.transformForward.getValue()\r\n        };\r\n        cs.outputUnit = cs.outputUnit || utils.getCSUnit(cs.wkid);\r\n        var _options = {\r\n          sameSRWithMap: utils.isSameSR(cs.wkid, this.map.spatialReference.wkid),\r\n          isGeographicCS: utils.isGeographicCS(cs.wkid),\r\n          isGeographicUnit: utils.isGeographicUnit(cs.outputUnit),\r\n          isProjectedCS: utils.isProjectedCS(cs.wkid),\r\n          isProjectUnit: utils.isProjectUnit(cs.outputUnit),\r\n          spheroidCS: utils.isProjectedCS(cs.wkid) ? utils.getGeoCSByProj(cs.wkid) : cs.wkid,\r\n          defaultUnit: utils.getCSUnit(cs.wkid),\r\n          unitRate: utils.getUnitRate(utils.getCSUnit(cs.wkid), cs.outputUnit)\r\n        };\r\n\r\n        //for hack DEGREES_DECIMAL_MINUTES\r\n        if(cs.outputUnit === \"DEGREES_DECIMAL_MINUTES\"){\r\n          _options.isGeographicUnit = true;\r\n          _options.unitRate = 1;\r\n        }\r\n\r\n        if (_options.isGeographicUnit && _options.isProjectedCS) { // use spheroidCS unit\r\n          _options.unitRate = 1;\r\n        }\r\n        cs.options = _options;\r\n        // console.log(cs);\r\n        return cs;\r\n      },\r\n\r\n      _removeGeoUnits: function() {\r\n        array.forEach(utils.getGeographicUnits(), lang.hitch(this, function(unit) {\r\n          this.outputUnit.removeOption(unit);\r\n        }));\r\n        this.outputUnit.removeOption(\"DEGREES_DECIMAL_MINUTES\");//for hack DEGREES_DECIMAL_MINUTES\r\n      },\r\n\r\n      _removeProjUnits: function() {\r\n        array.forEach(utils.getProjectUnits(), lang.hitch(this, function(unit) {\r\n          this.outputUnit.removeOption(unit);\r\n        }));\r\n      },\r\n\r\n      _removeAllUnits: function() {\r\n        for (var i = 0, len = options.length; i < len; i++) {\r\n          this.outputUnit.removeOption(options[i].value);\r\n        }\r\n      },\r\n\r\n      _addAllUnits: function() {\r\n        for (var i = 0, len = options.length; i < len; i++) {\r\n          // options[i].label = this.nls[options[i].label];\r\n          var _option = lang.clone(options[i]);\r\n          _option.label = this.nls[options[i].label];\r\n          this.outputUnit.addOption(_option);\r\n        }\r\n      },\r\n\r\n      _adjustUnitOption: function() { // display unit by cs\r\n        if (this.currentWkid === this.map.spatialReference.wkid) { // realtime\r\n          var isSpecialCS = utils.isWebMercator(this.currentWkid);\r\n          if (isSpecialCS) {\r\n            return;\r\n          } else if (this.currentWkid === 4326) {\r\n            this._removeProjUnits();\r\n          } else if (utils.isGeographicCS(this.currentWkid)) {\r\n            this._removeProjUnits();\r\n          } else if (utils.isProjectedCS(this.currentWkid)) {\r\n            this._removeGeoUnits();\r\n            this.outputUnit.removeOption(\"USNG\");\r\n            this.outputUnit.removeOption(\"MGRS\");\r\n          }\r\n        } else if (utils.isGeographicCS(this.currentWkid)) {\r\n          this._removeProjUnits();\r\n        }\r\n\r\n        if (this._config.outputUnit) {\r\n          this.outputUnit.set('value', this._config.outputUnit);\r\n        }\r\n      },\r\n\r\n      _isDefaultSR: function() {\r\n        var wkid = this.wkid.get('value'),\r\n          defaultWkid = this.map.spatialReference.wkid;\r\n        return utils.isSameSR(wkid, defaultWkid);\r\n      },\r\n\r\n      onWkidChange: function(newValue) {\r\n        var label = \"\",\r\n          newWkid = parseInt(newValue, 10);\r\n\r\n        this.popup.disableButton(0);\r\n\r\n        if (utils.isValidWkid(newWkid)) {\r\n          label = utils.getSRLabel(newWkid);\r\n          this.wkidLabel.innerHTML = jimuUtils.sanitizeHTML(label);\r\n\r\n          // same spheroid doesn't need transformation\r\n          if (utils.isSameSpheroid(newWkid, this.map.spatialReference.wkid)) {\r\n            this.transformationWkid.set('value', \"\");\r\n            html.setStyle(this.transformDiv, 'display', 'none');\r\n          } else {\r\n            html.setStyle(this.transformDiv, 'display', 'block');\r\n          }\r\n          // this.wkid.set('value', newWkid);\r\n\r\n          this.popup.enableButton(0);\r\n        } else if (newValue) {\r\n          this.wkid.set('value', \"\");\r\n          this.wkidLabel.innerHTML = this.nls.cName;\r\n        }\r\n        if (this.currentWkid !== newWkid) {\r\n          this.transformationWkid.set('value', \"\");\r\n        }\r\n        this.currentWkid = newWkid;\r\n\r\n        this._removeAllUnits();\r\n        this._addAllUnits();\r\n        this._adjustUnitOption();\r\n        this.outputUnit.closeDropDown();\r\n      },\r\n\r\n      ontfWkidChange: function(newValue) {\r\n        if (newValue) {\r\n          var tfid = \"\",\r\n            label = \"\",\r\n            newtfWkid = parseInt(newValue, 10);\r\n          if (utils.isValidTfWkid(newtfWkid)) {\r\n            tfid = newtfWkid;\r\n            label = utils.getTransformationLabel(newtfWkid);\r\n            this.transformationLabel.innerHTML = jimuUtils.sanitizeHTML(label);\r\n\r\n            html.setStyle(this.transformForward.domNode, \"display\", \"block\");\r\n          } else {\r\n            this.transformationLabel.innerHTML = this.nls.tName;\r\n            html.setStyle(this.transformForward.domNode, \"display\", \"none\");\r\n          }\r\n          this.transformationWkid.set('value', tfid);\r\n        } else {\r\n          this.transformationLabel.innerHTML = this.nls.tName;\r\n          html.setStyle(this.transformForward.domNode, \"display\", \"none\");\r\n        }\r\n      }\r\n    });\r\n  });"]}