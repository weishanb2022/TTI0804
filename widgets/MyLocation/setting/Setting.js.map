{"version":3,"sources":["../../../../widgets/MyLocation/setting/Setting.js"],"names":["define","declare","on","lang","_WidgetsInTemplateMixin","BaseWidgetSetting","Message","baseClass","startup","inherited","arguments","config","locateButton","geolocationOptions","own","highlightLocation","hitch","useTracking","setConfig","_setCompassParam","timeout","set","setValue","scale","getConfig","isValid","message","nls","warning","parseInt","value","checked","parseFloat","_getCompassParam","_compassParamHanlder","useCompass","useAccCircle"],"mappings":"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","file":"Setting.js","sourcesContent":["///////////////////////////////////////////////////////////////////////////\r\n// Copyright Â© Esri. All Rights Reserved.\r\n//\r\n// Licensed under the Apache License Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//    http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n///////////////////////////////////////////////////////////////////////////\r\n\r\ndefine([\r\n  'dojo/_base/declare',\r\n  'dojo/on',\r\n  'dojo/_base/lang',\r\n  'dijit/_WidgetsInTemplateMixin',\r\n  'jimu/BaseWidgetSetting',\r\n  'jimu/dijit/Message',\r\n  'dijit/form/NumberTextBox',\r\n  'jimu/dijit/CheckBox'\r\n],\r\n  function (\r\n    declare,\r\n    on, lang,\r\n    _WidgetsInTemplateMixin,\r\n    BaseWidgetSetting,\r\n    Message) {\r\n    return declare([BaseWidgetSetting, _WidgetsInTemplateMixin], {\r\n      //these two properties is defined in the BaseWidget\r\n      baseClass: 'jimu-widget-mylocation-setting',\r\n\r\n      startup: function () {\r\n        this.inherited(arguments);\r\n        if (!this.config.locateButton) {\r\n          this.config.locateButton = {};\r\n        }\r\n        if (!this.config.locateButton.geolocationOptions) {\r\n          this.config.locateButton.geolocationOptions = {};\r\n        }\r\n\r\n        this.own(on(this.highlightLocation, 'change', lang.hitch(this, '_compassParamHanlder')));\r\n        this.own(on(this.useTracking, 'change', lang.hitch(this, '_compassParamHanlder')));\r\n\r\n        this.setConfig(this.config);\r\n      },\r\n\r\n      setConfig: function (config) {\r\n        this.config = config;\r\n        this._setCompassParam();\r\n\r\n        if (config.locateButton.geolocationOptions &&\r\n          config.locateButton.geolocationOptions.timeout) {\r\n          this.timeout.set('value', config.locateButton.geolocationOptions.timeout);\r\n        }\r\n        if (config.locateButton.highlightLocation ||\r\n          typeof (config.locateButton.highlightLocation) === \"undefined\") {\r\n          this.highlightLocation.setValue(true);\r\n        } else {\r\n          this.highlightLocation.setValue(false);\r\n        }\r\n        if (config.locateButton.useTracking ||\r\n          typeof (config.locateButton.useTracking) === \"undefined\") {\r\n          this.useTracking.setValue(true);\r\n        } else {\r\n          this.useTracking.setValue(false);\r\n        }\r\n        //set the scale to zoom , when location has been found\r\n        if (config.locateButton.scale) {\r\n          this.scale.set('value', config.locateButton.scale);\r\n        }\r\n      },\r\n\r\n      getConfig: function () {\r\n        //check inputs\r\n        if (!this.isValid()) {\r\n          new Message({\r\n            message: this.nls.warning\r\n          });\r\n          return false;\r\n        }\r\n        this.config.locateButton.geolocationOptions.timeout = parseInt(this.timeout.value, 10);\r\n        // if (!this.config.locateButton.highlightLocation) {\r\n        this.config.locateButton.highlightLocation = this.highlightLocation.checked;\r\n        // }\r\n        this.config.locateButton.useTracking = this.useTracking.checked;\r\n        this.config.locateButton.scale = parseFloat(this.scale.value);\r\n\r\n        this._getCompassParam();\r\n\r\n        return this.config;\r\n      },\r\n\r\n      isValid: function () {\r\n        if (!this.scale.isValid() || !this.timeout.isValid()) {\r\n          return false;\r\n        }\r\n\r\n        return true;\r\n      },\r\n\r\n      //compass\r\n      _compassParamHanlder: function () {\r\n        if (this.highlightLocation.checked && this.useTracking.checked) {\r\n          this.useCompass.set(\"disabled\", false);\r\n          this.useAccCircle.set('disabled', false);\r\n        } else {\r\n          this.useCompass.set(\"disabled\", true);\r\n          this.useAccCircle.set('disabled', true);\r\n        }\r\n      },\r\n      _getCompassParam: function () {\r\n        this.config.useCompass = this.useCompass.checked;\r\n        this.config.useAccCircle = this.useAccCircle.checked;\r\n      },\r\n      _setCompassParam: function () {\r\n        this.useCompass.setValue(this.config.useCompass);\r\n        this.useAccCircle.setValue(this.config.useAccCircle);\r\n      }\r\n    });\r\n  });"]}