{"version":3,"sources":["../../../../widgets/OverviewMap/setting/Setting.js"],"names":["define","declare","BaseWidgetSetting","_WidgetsInTemplateMixin","Deferred","lang","on","BaseLayerConfig","CheckBox","baseClass","_selectedAttachTo","postCreate","expandBox","label","nls","expandText","checked","startup","own","topLeftNode","hitch","_selectItem","topRightNode","bottomLeftNode","bottomRightNode","baseLayerConfig","config","map","baseLayerConfigContainer","inherited","arguments","overviewMap","setConfig","setValue","visible","attachTo","_attachTo","position","top","undefined","left","window","isRTL","right","bottom","setValues","setChecked","_getSelectedAttachTo","getConfig","def","isValid","then","res","resolve","_hasMaximizeButton","maximizeButton","baseLayer","getValues"],"mappings":"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","file":"Setting.js","sourcesContent":["///////////////////////////////////////////////////////////////////////////\r\n// Copyright Â© Esri. All Rights Reserved.\r\n//\r\n// Licensed under the Apache License Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//    http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n///////////////////////////////////////////////////////////////////////////\r\n\r\ndefine([\r\n  'dojo/_base/declare',\r\n  'jimu/BaseWidgetSetting',\r\n  'dijit/_WidgetsInTemplateMixin',\r\n  'dojo/Deferred',\r\n  //'jimu/dijit/ColorTransparencyPicker',\r\n  'dojo/_base/lang',\r\n  'dojo/on',\r\n  //'dojo/_base/html',\r\n  //\"../utils\",\r\n  //'jimu/utils',\r\n  './BaseLayerConfig',\r\n  'jimu/dijit/CheckBox',\r\n  'jimu/dijit/RadioBtn'\r\n],\r\n  function (\r\n    declare, BaseWidgetSetting, _WidgetsInTemplateMixin, Deferred,//ColorTransparencyPicker,\r\n    lang, on,/* html, utils, jimuUtils,*/ BaseLayerConfig,\r\n    CheckBox) {\r\n    return declare([BaseWidgetSetting, _WidgetsInTemplateMixin], {\r\n      baseClass: 'jimu-widget-overviewmap-setting',\r\n      //_defaultColor: \"#000\",\r\n      //_defaultTransparency: 0.5,\r\n      _selectedAttachTo: \"\",\r\n\r\n      postCreate: function () {\r\n        this.expandBox = new CheckBox({\r\n          label: this.nls.expandText,\r\n          checked: false\r\n        }, this.expandBox);\r\n        this.expandBox.startup();\r\n\r\n        this.own(on(this.topLeftNode, 'click', lang.hitch(this, function () {\r\n          this._selectItem('top-left');\r\n        })));\r\n        this.own(on(this.topRightNode, 'click', lang.hitch(this, function () {\r\n          this._selectItem('top-right');\r\n        })));\r\n        this.own(on(this.bottomLeftNode, 'click', lang.hitch(this, function () {\r\n          this._selectItem('bottom-left');\r\n        })));\r\n        this.own(on(this.bottomRightNode, 'click', lang.hitch(this, function () {\r\n          this._selectItem('bottom-right');\r\n        })));\r\n\r\n        this.baseLayerConfig = new BaseLayerConfig({\r\n          nls: this.nls, config: this.config, map: this.map\r\n        }, this.baseLayerConfigContainer);\r\n        this.baseLayerConfig.startup();\r\n      },\r\n\r\n      startup: function () {\r\n        this.inherited(arguments);\r\n        if (!this.config.overviewMap) {\r\n          this.config.overviewMap = {};\r\n        }\r\n\r\n        this.setConfig(this.config);\r\n      },\r\n\r\n      setConfig: function (config) {\r\n        this.config = config;\r\n        this.expandBox.setValue(config.overviewMap.visible);\r\n        if (this.config.overviewMap.attachTo) {\r\n          this._selectItem(this.config.overviewMap.attachTo);\r\n        } else {\r\n          var _attachTo = \"\";\r\n          if (this.position) {\r\n            if (this.position.top !== undefined && this.position.left !== undefined) {\r\n              _attachTo = !window.isRTL ? \"top-left\" : \"top-right\";\r\n            } else if (this.position.top !== undefined && this.position.right !== undefined) {\r\n              _attachTo = !window.isRTL ? \"top-right\" : \"top-left\";\r\n            } else if (this.position.bottom !== undefined && this.position.left !== undefined) {\r\n              _attachTo = !window.isRTL ? \"bottom-left\" : \"bottom-right\";\r\n            } else if (this.position.bottom !== undefined && this.position.right !== undefined) {\r\n              _attachTo = !window.isRTL ? \"bottom-right\" : \"bottom-left\";\r\n            }\r\n          } else {\r\n            _attachTo = !window.isRTL ? \"top-right\" : \"top-left\";\r\n          }\r\n          this._selectItem(_attachTo);\r\n        }\r\n\r\n        this.baseLayerConfig.setValues(this.config);\r\n      },\r\n      // _setColor: function(){\r\n      //   var color = this._defaultColor;\r\n      //   var transparency = this._defaultTransparency;\r\n      //   if (bg) {\r\n      //     color = bg.color;\r\n      //     transparency = bg.transparency;\r\n      //   }\r\n      //   this.backgroundColorPicker.setValues({\r\n      //     \"color\": color,\r\n      //     \"transparency\": transparency\r\n      //   });\r\n      // },\r\n      _selectItem: function (attachTo) {\r\n        if (this[attachTo] && this[attachTo].setChecked) {\r\n          this[attachTo].setChecked(true);\r\n        }\r\n\r\n        this._selectedAttachTo = attachTo;\r\n      },\r\n\r\n      _getSelectedAttachTo: function () {\r\n        return this._selectedAttachTo;\r\n      },\r\n\r\n      getConfig: function () {\r\n        var def = new Deferred();\r\n        this.baseLayerConfig.isValid().then(lang.hitch(this, function (res) {\r\n          if (false === res) {\r\n            def.resolve(false);//inValid\r\n          } else {\r\n            this.config.overviewMap.visible = this.expandBox.checked;\r\n            this.config.overviewMap.attachTo = this._getSelectedAttachTo();\r\n\r\n            var _hasMaximizeButton = 'maximizeButton' in this.config.overviewMap;\r\n            this.config.overviewMap.maximizeButton = _hasMaximizeButton ? this.config.overviewMap.maximizeButton : true;\r\n\r\n            this.config.overviewMap.baseLayer = this.baseLayerConfig.getValues(this.config);\r\n\r\n            def.resolve(this.config);\r\n          }\r\n        }));\r\n\r\n        return def;\r\n      }\r\n    });\r\n  });"]}