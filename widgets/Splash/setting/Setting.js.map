{"version":3,"sources":["../../../../widgets/Splash/setting/Setting.js"],"names":["define","declare","lang","html","on","aspect","cookie","has","query","ColorTransparencyPicker","BackgroundSelector","SizeSelector","AlignSelector","_WidgetsInTemplateMixin","Editor","EditorXssFilter","utils","BaseWidgetSetting","CheckBox","TabContainer","LoadingShelter","Deferred","baseClass","_defaultSize","mode","wh","w","h","_defaultColor","_defaultConfirmColor","_defaultTransparency","postMixInProperties","nls","mixin","window","jimuNls","common","editorXssFilter","getInstance","postCreate","shelter","hidden","placeAt","domNode","startup","tab","tabs","title","content","contentTab","appearance","appearanceTab","options","optionsTab","selected","tabsContainer","own","hitch","resize","inherited","arguments","initContentTab","head","document","getElementsByTagName","tcCssHref","apiUrl","tcCss","loadStyleLink","epCssHref","epCss","pfCssHref","pfCss","initEditor","initAppearanceTab","sizeSelector","backgroundSelector","alignSelector","buttonColorPicker","buttonColorPickerEditor","confirmColorPicker","confirmColorPickerEditor","initOptionsTab","requireConfirmSplash","set","noRequireConfirmSplash","watch","_changeRequireConfirm","before","_beforeGetConfig","showOption","label","optionText","checked","addClass","confirmOption","show","config","splash","setConfig","editor","plugins","getEditorTextColor","getEditorBackgroundColor","extraPlugins","name","command","custom","split","style","setStyle","width","height","instrBox","getMarginBox","instructionNode","footerBox","splashFooterNode","editorContainer","top","bottom","box","_setWidthForOldVersion","then","sanitize","splashContent","defaultContent","requireConfirm","setValue","confirmEverytime","setAttr","confirmText","stripHTML","confirm","text","defaultConfirmText","setValues","color","transparency","size","image","imageChooser","setDefaultSelfSrc","contentVertical","button","buttonText","ok","hide","setTimeout","isFirstKey","_getCookieKey","expires","path","encodeURIComponent","getAppIdFromUrl","isValid","getConfig","_getEditorValue","getValue","get","value","confirmColor","getValues","background","btnColor","_selectedNode","requireConfirmRadio","confirmContainer","noRequireRadio","setChecked","destroy","remove","_onConfirmTextBlur","_onButtonTextBlur","contentVal","def","isOldVersion","getEditorContentHeight","resolve","wapperBox","getContentBox","iFrame","headBox","header"],"mappings":"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","file":"Setting.js","sourcesContent":["///////////////////////////////////////////////////////////////////////////\r\n// Copyright Â© Esri. All Rights Reserved.\r\n//\r\n// Licensed under the Apache License Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//    http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n///////////////////////////////////////////////////////////////////////////\r\n\r\ndefine([\r\n    'dojo/_base/declare',\r\n    \"dojo/_base/lang\",\r\n    'dojo/_base/html',\r\n    'dojo/on',\r\n    'dojo/aspect',\r\n    'dojo/cookie',\r\n    'dojo/sniff',\r\n    'dojo/query',\r\n    'jimu/dijit/ColorTransparencyPicker',\r\n    './BackgroundSelector',\r\n    './SizeSelector',\r\n    './AlignSelector',\r\n    'dijit/_WidgetsInTemplateMixin',\r\n    'dijit/Editor',\r\n    'jimu/dijit/EditorXssFilter',\r\n    'jimu/utils',\r\n    'jimu/BaseWidgetSetting',\r\n    \"jimu/dijit/CheckBox\",\r\n    'jimu/dijit/TabContainer',\r\n    'jimu/dijit/LoadingShelter',\r\n    'dojo/Deferred',\r\n    'dojo/NodeList-manipulate',\r\n    \"jimu/dijit/RadioBtn\",\r\n    'dijit/_editor/plugins/LinkDialog',\r\n    'dijit/_editor/plugins/ViewSource',\r\n    'dijit/_editor/plugins/FontChoice',\r\n    'dojox/editor/plugins/Preview',\r\n    'dijit/_editor/plugins/TextColor',\r\n    'dojox/editor/plugins/ToolbarLineBreak',\r\n    'dijit/ToolbarSeparator',\r\n    'dojox/editor/plugins/FindReplace',\r\n    'dojox/editor/plugins/PasteFromWord',\r\n    'dojox/editor/plugins/InsertAnchor',\r\n    'dojox/editor/plugins/Blockquote',\r\n    'dojox/editor/plugins/UploadImage',\r\n    'jimu/dijit/EditorChooseImage',\r\n    'jimu/dijit/EditorTextColor',\r\n    'jimu/dijit/EditorBackgroundColor'\r\n  ],\r\n  function(declare, lang, html, on, aspect, cookie, has, query,\r\n           ColorTransparencyPicker, BackgroundSelector, SizeSelector, AlignSelector,\r\n           _WidgetsInTemplateMixin, Editor, EditorXssFilter,\r\n           utils, BaseWidgetSetting, CheckBox, TabContainer, LoadingShelter, Deferred) {\r\n    return declare([BaseWidgetSetting, _WidgetsInTemplateMixin], {\r\n      baseClass: 'jimu-widget-splash-setting',\r\n      _defaultSize: {mode: \"wh\", wh: {w: 600, h: 264}},\r\n      _defaultColor: '#485566',\r\n      _defaultConfirmColor: \"#ffffff\",\r\n      _defaultTransparency: 0,\r\n\r\n      postMixInProperties: function() {\r\n        this.nls = lang.mixin(this.nls, window.jimuNls.common);\r\n        this.editorXssFilter = EditorXssFilter.getInstance();\r\n      },\r\n      postCreate: function() {\r\n        //LoadingShelter\r\n        this.shelter = new LoadingShelter({\r\n          hidden: true\r\n        });\r\n        this.shelter.placeAt(this.domNode);\r\n        this.shelter.startup();\r\n\r\n        this.tab = new TabContainer({\r\n          tabs: [{\r\n            title: this.nls.content,\r\n            content: this.contentTab\r\n          }, {\r\n            title: this.nls.appearance,\r\n            content: this.appearanceTab\r\n          }, {\r\n            title: this.nls.options,\r\n            content: this.optionsTab\r\n          }],\r\n          selected: this.nls.content\r\n        });\r\n        this.tab.placeAt(this.tabsContainer);\r\n        this.tab.startup();\r\n        //the editor of first page, need to calculate scroll bar\r\n        this.own(on(this.tab, 'tabChanged', lang.hitch(this, function(title) {\r\n          if (title === this.nls.content) {\r\n            this.resize();\r\n          }\r\n        })));\r\n\r\n        this.inherited(arguments);\r\n      },\r\n      initContentTab: function() {\r\n        var head = document.getElementsByTagName('head')[0];\r\n        var tcCssHref = window.apiUrl + \"dojox/editor/plugins/resources/css/TextColor.css\";\r\n        var tcCss = query('link[href=\"' + tcCssHref + '\"]', head)[0];\r\n        if (!tcCss) {\r\n          utils.loadStyleLink(\"editor_plugins_resources_TextColor\", tcCssHref);\r\n        }\r\n        var epCssHref = window.apiUrl + \"dojox/editor/plugins/resources/editorPlugins.css\";\r\n        var epCss = query('link[href=\"' + epCssHref + '\"]', head)[0];\r\n        if (!epCss) {\r\n          utils.loadStyleLink(\"editor_plugins_resources_editorPlugins\", epCssHref);\r\n        }\r\n        var pfCssHref = window.apiUrl + \"dojox/editor/plugins/resources/css/PasteFromWord.css\";\r\n        var pfCss = query('link[href=\"' + pfCssHref + '\"]', head)[0];\r\n        if (!pfCss) {\r\n          utils.loadStyleLink(\"editor_plugins_resources_PasteFromWord\", pfCssHref);\r\n        }\r\n\r\n        this.initEditor();\r\n      },\r\n      initAppearanceTab: function() {\r\n        this.sizeSelector = new SizeSelector({nls: this.nls}, this.sizeSelector);\r\n\r\n        this.backgroundSelector = new BackgroundSelector({nls: this.nls}, this.backgroundSelector);\r\n        this.backgroundSelector.startup();\r\n\r\n        this.alignSelector = new AlignSelector({nls: this.nls}, this.alignSelector);\r\n        this.alignSelector.startup();\r\n\r\n        this.buttonColorPicker = new ColorTransparencyPicker({}, this.buttonColorPickerEditor);\r\n        this.buttonColorPicker.startup();\r\n\r\n        this.confirmColorPicker = new ColorTransparencyPicker({}, this.confirmColorPickerEditor);\r\n        this.confirmColorPicker.startup();\r\n      },\r\n      initOptionsTab: function() {\r\n        this.own(on(this.requireConfirmSplash, 'click', lang.hitch(this, function() {\r\n          this.set('requireConfirm', true);\r\n        })));\r\n        this.own(on(this.noRequireConfirmSplash, 'click', lang.hitch(this, function() {\r\n          this.set('requireConfirm', false);\r\n        })));\r\n        this.own(this.watch('requireConfirm', lang.hitch(this, this._changeRequireConfirm)));\r\n        this.own(aspect.before(this, 'getConfig', lang.hitch(this, this._beforeGetConfig)));\r\n        this.showOption = new CheckBox({\r\n          label: this.nls.optionText,\r\n          checked: false\r\n        }, this.showOption);\r\n        this.showOption.startup();\r\n        html.addClass(this.showOption.domNode, 'option-text');\r\n        this.confirmOption = new CheckBox({\r\n          label: this.nls.confirmOption,\r\n          checked: false\r\n        }, this.confirmOption);\r\n        this.confirmOption.startup();\r\n        html.addClass(this.confirmOption.domNode, 'confirm-option');\r\n      },\r\n\r\n      startup: function() {\r\n        this.inherited(arguments);\r\n        this.shelter.show();\r\n        if (!this.config.splash) {\r\n          this.config.splash = {};\r\n        }\r\n\r\n        this.initContentTab();\r\n        this.initAppearanceTab();\r\n        this.initOptionsTab();\r\n\r\n        this.setConfig(this.config);\r\n\r\n        this.resize();\r\n      },\r\n\r\n      initEditor: function() {\r\n        this.editor = new Editor({\r\n          plugins: [\r\n            'bold', 'italic', 'underline',\r\n            utils.getEditorTextColor(\"splash\"), utils.getEditorBackgroundColor(\"splash\"),\r\n            '|', 'justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull',\r\n            '|', 'insertOrderedList', 'insertUnorderedList', 'indent', 'outdent'\r\n          ],\r\n          extraPlugins: [\r\n            '|', 'createLink', 'unlink', 'pastefromword', '|', 'undo', 'redo',\r\n            '|', 'chooseImage', '|', 'viewsource', 'toolbarlinebreak',\r\n            {\r\n              name: \"dijit._editor.plugins.FontChoice\",\r\n              command: \"fontName\",\r\n              custom: \"Arial;Comic Sans MS;Courier New;Garamond;Tahoma;Times New Roman;Verdana\".split(\";\")\r\n            },\r\n            'fontSize', 'formatBlock'\r\n          ],\r\n          style: \"font-family:Verdana;\"\r\n        }, this.editor);\r\n        html.setStyle(this.editor.domNode, {\r\n          width: '100%',\r\n          height: '100%'\r\n        });\r\n        this.editor.startup();\r\n\r\n        var instrBox = html.getMarginBox(this.instructionNode);\r\n        var footerBox = html.getMarginBox(this.splashFooterNode);\r\n\r\n        html.setStyle(this.editorContainer, {\r\n          top: instrBox.h + 8 + 'px',\r\n          bottom: footerBox.h + 10 + 10 + 'px'\r\n        });\r\n\r\n        if (has('ie') !== 8) {\r\n          this.editor.resize({\r\n            w: '100%',\r\n            h: '100%'\r\n          });\r\n        } else {\r\n          var box = html.getMarginBox(this.editorContainer);\r\n          this.editor.resize({\r\n            w: box.w,\r\n            h: box.h\r\n          });\r\n        }\r\n      },\r\n\r\n      setConfig: function(config) {\r\n        this.config = config;\r\n\r\n        this._setWidthForOldVersion().then(lang.hitch(this, function() {\r\n          //var content = utils.setWABLogoAlt(config);\r\n          this.editor.set('value', this.editorXssFilter.sanitize(config.splash.splashContent || this.nls.defaultContent));\r\n          this.set('requireConfirm', config.splash.requireConfirm);\r\n          this.showOption.setValue(config.splash.showOption);\r\n          this.confirmOption.setValue(config.splash.confirmEverytime);\r\n          html.setAttr(\r\n            this.confirmText,\r\n            'value',\r\n            utils.stripHTML(config.splash.confirm.text || this.nls.defaultConfirmText)\r\n          );\r\n          this.confirmColorPicker.setValues({\r\n            \"color\": config.splash.confirm.color || this._defaultConfirmColor,\r\n            \"transparency\": config.splash.confirm.transparency || this._defaultTransparency\r\n          });\r\n\r\n          this.sizeSelector.setValue(config.splash.size || this._defaultSize);\r\n          if (\"undefined\" !== typeof config.splash.image) {\r\n            this.imageChooser.setDefaultSelfSrc(config.splash.image);\r\n          }\r\n\r\n          this.alignSelector.setValue(config.splash.contentVertical);\r\n\r\n          this.backgroundSelector.setValues(config);\r\n\r\n          this.buttonColorPicker.setValues({\r\n            \"color\": config.splash.button.color || this._defaultColor,\r\n            \"transparency\": config.splash.button.transparency || this._defaultTransparency\r\n          });\r\n          html.setAttr(\r\n            this.buttonText, 'value',\r\n            utils.stripHTML(config.splash.button.text || this.nls.ok)\r\n          );\r\n\r\n          this.shelter.hide();\r\n          this.resize();\r\n          setTimeout(lang.hitch(this, function () {\r\n            this.resize();\r\n          }), 200);\r\n        }));\r\n      },\r\n\r\n      _beforeGetConfig: function() {\r\n        var isFirstKey = this._getCookieKey();\r\n        cookie(isFirstKey, true, {\r\n          expires: 1000,\r\n          path: '/'\r\n        });\r\n      },\r\n\r\n      _getCookieKey: function() {\r\n        return 'isfirst_' + encodeURIComponent(utils.getAppIdFromUrl());\r\n      },\r\n\r\n      isValid: function () {\r\n        return this.backgroundSelector.isValid() &&\r\n          this.buttonColorPicker.isValid() &&\r\n          this.confirmColorPicker.isValid();\r\n      },\r\n      getConfig: function () {\r\n        if (!this.isValid()) {\r\n          return false;\r\n        }\r\n\r\n        this.config.splash.splashContent = this._getEditorValue();\r\n        this.config.splash.size = this.sizeSelector.getValue();\r\n\r\n        this.config.splash.requireConfirm = this.get('requireConfirm');\r\n        this.config.splash.showOption = this.showOption.getValue();\r\n        this.config.splash.confirmEverytime = this.confirmOption.getValue();\r\n\r\n        if (this.get('requireConfirm')) {\r\n          this.config.splash.confirm.text = utils.stripHTML(this.confirmText.value || \"\");\r\n        } else {\r\n          this.config.splash.confirm.text = \"\";\r\n        }\r\n        var confirmColor = this.confirmColorPicker.getValues();\r\n        if (confirmColor) {\r\n          this.config.splash.confirm.color = confirmColor.color;\r\n          this.config.splash.confirm.transparency = confirmColor.transparency;\r\n        }\r\n\r\n        this.config.splash.background = this.backgroundSelector.getValues();\r\n\r\n        this.config.splash.button = {};\r\n        var btnColor = this.buttonColorPicker.getValues();\r\n        if (btnColor) {\r\n          this.config.splash.button.color = btnColor.color;\r\n          this.config.splash.button.transparency = btnColor.transparency;\r\n        }\r\n        this.config.splash.button.text = utils.stripHTML(this.buttonText.value || \"\");\r\n\r\n        this.config.splash.contentVertical = this.alignSelector.getValue();\r\n        return this.config;\r\n      },\r\n\r\n      _changeRequireConfirm: function() {\r\n        var _selectedNode = null;\r\n        if (this.get('requireConfirm')) {\r\n          _selectedNode = this.requireConfirmRadio;\r\n          html.setStyle(this.confirmContainer, 'display', 'block');\r\n          html.setStyle(this.showOption.domNode, 'display', 'none');\r\n        } else {\r\n          _selectedNode = this.noRequireRadio;\r\n          html.setStyle(this.showOption.domNode, 'display', 'block');\r\n          html.setStyle(this.confirmContainer, 'display', 'none');\r\n        }\r\n\r\n        if(_selectedNode && _selectedNode.setChecked){\r\n          _selectedNode.setChecked(true);\r\n        }\r\n      },\r\n\r\n      destroy: function() {\r\n        var head = document.getElementsByTagName('head')[0];\r\n        query('link[id^=\"editor_plugins_resources\"]', head).remove();\r\n\r\n        this.inherited(arguments);\r\n      },\r\n      _onConfirmTextBlur: function() {\r\n        this.confirmText.value = utils.stripHTML(this.confirmText.value || \"\");\r\n      },\r\n      _onButtonTextBlur: function() {\r\n        this.buttonText.value = utils.stripHTML(this.buttonText.value || \"\");\r\n      },\r\n      _getEditorValue: function() {\r\n        var contentVal = this.editor.get('value');\r\n        if (contentVal === \"\") {\r\n          contentVal = \"<p></p>\";\r\n        }\r\n        return contentVal;\r\n      },\r\n      //for old version update\r\n      _setWidthForOldVersion: function() {\r\n        var def = new Deferred();\r\n        var size = this.config.splash.size;\r\n        var isOldVersion = (\"wh\" === size.mode && typeof size.wh !== \"undefined\" && null === size.wh.h);\r\n        if (true === isOldVersion) {\r\n          return utils.getEditorContentHeight(this.config.splash.splashContent, this.domNode, {\r\n            \"contentWidth\": 600 - 40,\r\n            \"contentMarginTop\": 20,//contentMarginTop\r\n            \"footerHeight\": 88 + 10//contentMarginBottom\r\n          }).then(\r\n            lang.hitch(this, function(h) {\r\n              size.wh.h = h;\r\n              return h;\r\n            }));\r\n        } else {\r\n          def.resolve();\r\n          return def;\r\n        }\r\n      },\r\n\r\n      resize: function() {\r\n        var wapperBox = html.getContentBox(this.editorContainer);\r\n        var iFrame = query('.dijitEditorIFrameContainer', this.editorContainer)[0];\r\n        var headBox;\r\n        if (this.editor && this.editor.header) {\r\n          headBox = html.getContentBox(this.editor.header);\r\n        }\r\n        if (iFrame && wapperBox && headBox) {\r\n          html.setStyle(iFrame, 'height', wapperBox.h - headBox.h - 4 + \"px\");\r\n        }\r\n      }\r\n    });\r\n  });"]}