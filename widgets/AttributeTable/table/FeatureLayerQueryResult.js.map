{"version":3,"sources":["../../../../widgets/AttributeTable/table/FeatureLayerQueryResult.js"],"names":["define","esri","lang","dojo","Deferred","FeatureLayerQueryResult","result","then","delegate","total","when","_isDefined","length","addIterativeMethod","method","args","arguments","Array","prototype","unshift","call","features","apply"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,OAAO,CACL,WADK,EAEL,iBAFK,EAGL,mBAHK,EAIL,qBAJK,EAKL,mBALK,EAML,kBANK,CAAP,EAOG,UACDC,IADC,EAEDC,IAFC,EAGDC,IAHC,EAIDC,QAJC,EAKF;AACC,MAAIC,0BAA0B,SAA1BA,uBAA0B,CAAUC,MAAV,EAAkB;AAC9C,QAAI,CAACA,MAAL,EAAa;AACX,aAAOA,MAAP;AACD;;AAED,QAAIA,OAAOC,IAAX,EAAiB;AACfD,eAASJ,KAAKM,QAAL,CAAcF,MAAd,CAAT;AACD;;AAED,QAAI,CAACA,OAAOG,KAAZ,EAAmB;AACjBH,aAAOG,KAAP,GAAeL,SAASM,IAAT,CAAcJ,MAAd,EAAsB,UAAUA,MAAV,EAAkB;AACrD,eAAOL,KAAKU,UAAL,CAAgBL,OAAOG,KAAvB,IAAgCH,OAAOG,KAAvC,GAAgDH,OAAOM,MAAP,IAAiB,CAAxE;AACD,OAFc,CAAf;AAGD;;AAED,aAASC,kBAAT,CAA4BC,MAA5B,EAAoC;AAClC,UAAI,CAACR,OAAOQ,MAAP,CAAL,EAAqB;AACnBR,eAAOQ,MAAP,IAAiB,YAAY;AAC3B,cAAIC,OAAOC,SAAX;AACA,iBAAOZ,SAASM,IAAT,CAAcJ,MAAd,EAAsB,UAAUA,MAAV,EAAkB;AAC7CW,kBAAMC,SAAN,CAAgBC,OAAhB,CAAwBC,IAAxB,CAA6BL,IAA7B,EAAoCT,OAAOe,QAAP,IAAmBf,MAAvD;AACA,mBAAOD,wBAAwBF,KAAKW,MAAL,EAAaQ,KAAb,CAAmBnB,IAAnB,EAAyBY,IAAzB,CAAxB,CAAP;AACD,WAHM,CAAP;AAID,SAND;AAOD;AACF;;AAEDF,uBAAmB,SAAnB;AACAA,uBAAmB,QAAnB;AACAA,uBAAmB,KAAnB;AACAA,uBAAmB,MAAnB;AACAA,uBAAmB,OAAnB;;AAEA,WAAOP,MAAP;AACD,GAlCD;AAmCA,SAAOD,uBAAP;AACD,CAjDD","file":"FeatureLayerQueryResult.js","sourcesContent":["///////////////////////////////////////////////////////////////////////////\r\n// Copyright Â© Esri. All Rights Reserved.\r\n//\r\n// Licensed under the Apache License Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//    http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n///////////////////////////////////////////////////////////////////////////\r\ndefine([\r\n  \"esri/main\",\r\n  \"dojo/_base/lang\",\r\n  \"dojo/_base/kernel\",\r\n  \"dojo/_base/Deferred\",\r\n  \"dojo/DeferredList\",\r\n  \"dojo/_base/array\"\r\n], function(\r\n  esri,\r\n  lang,\r\n  dojo,\r\n  Deferred\r\n){\r\n  var FeatureLayerQueryResult = function (result) {\r\n    if (!result) {\r\n      return result;\r\n    }\r\n\r\n    if (result.then) {\r\n      result = lang.delegate(result);\r\n    }\r\n\r\n    if (!result.total) {\r\n      result.total = Deferred.when(result, function (result) {\r\n        return esri._isDefined(result.total) ? result.total : (result.length || 0);\r\n      });\r\n    }\r\n\r\n    function addIterativeMethod(method) {\r\n      if (!result[method]) {\r\n        result[method] = function () {\r\n          var args = arguments;\r\n          return Deferred.when(result, function (result) {\r\n            Array.prototype.unshift.call(args, (result.features || result));\r\n            return FeatureLayerQueryResult(dojo[method].apply(dojo, args));\r\n          });\r\n        };\r\n      }\r\n    }\r\n\r\n    addIterativeMethod(\"forEach\");\r\n    addIterativeMethod(\"filter\");\r\n    addIterativeMethod(\"map\");\r\n    addIterativeMethod(\"some\");\r\n    addIterativeMethod(\"every\");\r\n\r\n    return result;\r\n  };\r\n  return FeatureLayerQueryResult;\r\n});"]}